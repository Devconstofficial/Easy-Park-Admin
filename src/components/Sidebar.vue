<script setup lang="ts">
import { ref } from 'vue'
import { useSidebar } from '../composables/useSidebar'
import { useRouter } from 'vue-router';

const { isOpen } = useSidebar()
const activeClass = ref('bg-[#7C77F6] text-white rounded-xl px-4 py-3')
const inactiveClass = ref('text-gray-500 hover:bg-gray-200 rounded-xl px-4 py-3')
const router = useRouter();

const logout = () => {
  router.push("/");
}
</script>

<template>
  <div class="flex">
    <!-- Backdrop -->
    <div :class="isOpen ? 'block' : 'hidden'"
      class="fixed inset-0 z-20 transition-opacity bg-black opacity-50 lg:hidden" @click="isOpen = false" />

    <!-- Sidebar -->
    <div :class="isOpen ? 'translate-x-0 ease-out' : '-translate-x-full ease-in'"
      class="fixed inset-y-0 left-0 z-30 w-64 p-4 bg-white transition-transform duration-300 transform lg:translate-x-0 lg:static lg:inset-0 flex flex-col justify-between">

      <div>
        <!-- Logo -->
        <div class="flex items-center justify-center mt-6">
          <div class="flex items-center">
            <svg width="60" height="60" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd"
                d="M30.642 0C19.4167 0 10.2845 9.07649 10.2845 20.2334V34.521V40.4667V56H22.2503V40.4667H30.642C41.8678 40.4667 51 31.3902 51 20.2334C51 9.07649 41.8678 0 30.642 0ZM30.642 28.5744C35.2696 28.5744 39.0347 24.8327 39.0347 20.2334C39.0347 15.6345 35.2696 11.8924 30.642 11.8924C26.015 11.8924 22.2503 15.6345 22.2503 20.2334V28.5744H30.642Z"
                fill="#7C77F6" />
            </svg>
            <span class="ml-2 text-2xl font-semibold text-black">Park</span>
          </div>
        </div>

        <!-- Sidebar Navigation -->
        <nav class="mt-[3rem] space-y-4">
          <router-link class="flex items-center gap-3"
            :class="[$route.name === 'Dashboard' ? activeClass : inactiveClass]" to="/dashboard">
            <svg class="w-6 h-6 text-current" viewBox="0 0 20 20" fill="currentColor">
              <path d="M2 10C2 5.58172 5.58172 2 10 2V10H18C18 14.4183 14.4183 18 10 18C5.58172 18 2 14.4183 2 10Z" />
              <path d="M12 2.25C14.81 2.98 17.02 5.19 17.75 8H12V2.25Z" />
            </svg>
            <span class="text-lg">Dashboard</span>
          </router-link>

          <router-link class="flex items-center gap-3" :class="[$route.name === 'Users' ? activeClass : inactiveClass]"
            to="/users">
            <svg width="22" height="21" viewBox="0 0 22 21" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M20.9734 18.6874C19.688 16.4315 17.6809 14.6737 15.2752 13.6971C16.4716 12.7998 17.3553 11.5489 17.8011 10.1215C18.247 8.69412 18.2325 7.16262 17.7596 5.74395C17.2867 4.32527 16.3794 3.09135 15.1663 2.21697C13.9531 1.34259 12.4956 0.87207 11.0002 0.87207C9.50481 0.87207 8.04731 1.34259 6.83416 2.21697C5.62102 3.09135 4.71375 4.32527 4.24086 5.74395C3.76797 7.16262 3.75343 8.69412 4.19932 10.1215C4.6452 11.5489 5.52889 12.7998 6.72522 13.6971C4.31953 14.6737 2.31245 16.4315 1.0271 18.6874C0.947454 18.8154 0.894371 18.9582 0.871006 19.1072C0.847641 19.2562 0.85447 19.4084 0.891088 19.5547C0.927706 19.701 0.993366 19.8384 1.08416 19.9588C1.17496 20.0792 1.28904 20.1802 1.41963 20.2556C1.55021 20.3311 1.69463 20.3795 1.8443 20.398C1.99397 20.4165 2.14584 20.4047 2.29087 20.3634C2.4359 20.322 2.57114 20.252 2.68854 20.1573C2.80595 20.0626 2.90312 19.9453 2.97429 19.8124C4.67304 16.8761 7.67304 15.1249 11.0002 15.1249C14.3274 15.1249 17.3274 16.8771 19.0262 19.8124C19.1804 20.0604 19.425 20.2387 19.7083 20.3096C19.9916 20.3805 20.2914 20.3385 20.5443 20.1924C20.7972 20.0463 20.9833 19.8076 21.0634 19.5267C21.1434 19.2458 21.1112 18.9449 20.9734 18.6874Z"
                fill="currentColor" />
            </svg>
            <span class="text-lg">Users</span>
          </router-link>

          <router-link class="flex items-center gap-3"
            :class="[$route.name === 'Bookings' ? activeClass : inactiveClass]" to="/bookings">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd"
                d="M5.27078 8.214C6.02055 6.312 6.92243 5 8.96408 5H14.4367C16.4764 5 17.3793 6.312 18.13 8.214L18.8798 10.249C19.4385 10.2559 19.9517 10.5661 20.2282 11.064C20.3909 11.3476 20.4761 11.6709 20.4749 12V14.624C20.4822 15.2367 20.1806 15.8098 19.6774 16.14C19.438 16.2929 19.1618 16.3739 18.8798 16.374H4.52003C4.23808 16.3739 3.9618 16.2929 3.72248 16.14C3.2192 15.8098 2.91767 15.2367 2.92493 14.624V12C2.92387 11.6713 3.00908 11.3483 3.1716 11.065C3.44814 10.5671 3.96136 10.2569 4.52003 10.25L5.27078 8.214Z"
                stroke="#737791" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
              <path
                d="M6.86598 16.375C6.86598 15.9608 6.5302 15.625 6.11598 15.625C5.70177 15.625 5.36598 15.9608 5.36598 16.375H6.86598ZM6.11598 17.688H5.36598C5.36598 17.6958 5.3661 17.7036 5.36635 17.7114L6.11598 17.688ZM4.91868 19L4.89188 19.7495C4.90955 19.7502 4.92723 19.7502 4.94489 19.7496L4.91868 19ZM3.72236 17.687L4.47197 17.711C4.47223 17.703 4.47236 17.695 4.47236 17.687H3.72236ZM4.47236 16.14C4.47236 15.7258 4.13657 15.39 3.72236 15.39C3.30814 15.39 2.97236 15.7258 2.97236 16.14H4.47236ZM4.51991 9.49902C4.10569 9.49902 3.76991 9.83481 3.76991 10.249C3.76991 10.6632 4.10569 10.999 4.51991 10.999V9.49902ZM18.8797 10.999C19.2939 10.999 19.6297 10.6632 19.6297 10.249C19.6297 9.83481 19.2939 9.49902 18.8797 9.49902V10.999ZM18.0346 16.374C18.0346 15.9598 17.6988 15.624 17.2846 15.624C16.8704 15.624 16.5346 15.9598 16.5346 16.374H18.0346ZM17.2846 17.687L18.0332 17.7336C18.0341 17.7181 18.0346 17.7026 18.0346 17.687H17.2846ZM19.6782 17.687H18.9282C18.9282 17.7026 18.9287 17.7181 18.9297 17.7336L19.6782 17.687ZM20.4282 16.14C20.4282 15.7258 20.0925 15.39 19.6782 15.39C19.264 15.39 18.9282 15.7258 18.9282 16.14H20.4282ZM5.84981 12.75C5.43559 12.75 5.09981 13.0858 5.09981 13.5C5.09981 13.9142 5.43559 14.25 5.84981 14.25V12.75ZM6.82481 14.25C7.23902 14.25 7.57481 13.9142 7.57481 13.5C7.57481 13.0858 7.23902 12.75 6.82481 12.75V14.25ZM16.5748 12.75C16.1606 12.75 15.8248 13.0858 15.8248 13.5C15.8248 13.9142 16.1606 14.25 16.5748 14.25V12.75ZM17.5498 14.25C17.964 14.25 18.2998 13.9142 18.2998 13.5C18.2998 13.0858 17.964 12.75 17.5498 12.75V14.25ZM5.36598 16.375V17.688H6.86598V16.375H5.36598ZM5.36635 17.7114C5.37591 18.0175 5.14551 18.2416 4.89247 18.2505L4.94489 19.7496C6.05896 19.7106 6.89986 18.7608 6.86562 17.6646L5.36635 17.7114ZM4.94548 18.2505C4.69242 18.2415 4.46217 18.0171 4.47197 17.711L2.97274 17.663C2.93762 18.7592 3.77782 19.7097 4.89188 19.7495L4.94548 18.2505ZM4.47236 17.687V16.14H2.97236V17.687H4.47236ZM4.51991 10.999H18.8797V9.49902H4.51991V10.999ZM16.5346 16.374V17.687H18.0346V16.374H16.5346ZM16.5361 17.6404C16.4909 18.3667 16.8422 19.0678 17.4639 19.4543L18.2558 18.1803C18.1135 18.0919 18.0214 17.9219 18.0332 17.7336L16.5361 17.6404ZM17.4639 19.4543C18.0884 19.8424 18.8744 19.8424 19.4989 19.4543L18.7071 18.1803C18.5675 18.2671 18.3954 18.2671 18.2558 18.1803L17.4639 19.4543ZM19.4989 19.4543C20.1207 19.0678 20.472 18.3667 20.4268 17.6404L18.9297 17.7336C18.9414 17.9219 18.8494 18.0919 18.7071 18.1803L19.4989 19.4543ZM20.4282 17.687V16.14H18.9282V17.687H20.4282ZM5.84981 14.25H6.82481V12.75H5.84981V14.25ZM16.5748 14.25H17.5498V12.75H16.5748V14.25Z"
                fill="#737791" />
            </svg>

            <span class="text-lg">Bookings</span>
          </router-link>
        </nav>
      </div>

      <!-- Logout Button -->
      <button @click="logout" class="flex items-center gap-3 text-red-500 hover:bg-gray-100 rounded-xl px-4 py-3 mt-4">
        <svg width="22" height="20" viewBox="0 0 22 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M10 20C4.477 20 0 15.523 0 10C0 4.477 4.477 2.81829e-06 10 2.81829e-06C11.5527 -0.00116364 13.0842 0.359775 14.4729 1.05414C15.8617 1.74851 17.0693 2.75718 18 4H15.29C14.1352 2.98176 12.7112 2.31836 11.1887 2.0894C9.66625 1.86044 8.11007 2.07566 6.70689 2.70922C5.30371 3.34277 4.11315 4.36776 3.27807 5.66119C2.44299 6.95462 1.99887 8.46153 1.999 10.0011C1.99913 11.5407 2.4435 13.0475 3.27879 14.3408C4.11409 15.6341 5.30482 16.6589 6.7081 17.2922C8.11139 17.9255 9.66761 18.1405 11.19 17.9113C12.7125 17.6821 14.1364 17.0184 15.291 16H18.001C17.0702 17.243 15.8624 18.2517 14.4735 18.9461C13.0846 19.6405 11.5528 20.0013 10 20ZM17 14V11H9V9H17V6L22 10L17 14Z"
            fill="#7C77F6" />
        </svg>

        <span class="text-lg text-[#7C77F6] font-bold">LOGOUT</span>
      </button>

    </div>
  </div>
</template>
